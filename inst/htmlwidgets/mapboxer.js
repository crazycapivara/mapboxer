!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="MAPBOXER"},function(t,e,n){"use strict";var r=n(3);var o={TextControl:class{constructor(t){this._options=t||{}}onAdd(t){return this._map=t,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl",this._container.style.cssText=this._options.cssText||"background: white; padding: 10px; border-radius: 5px;",this._container.textContent=this._options.text||"Hello, world",this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}},i=n(0);e.a={addControl:function(t){const e=new mapboxgl[t.controlName](t.options);this.addControl(e,t.pos)},addSource:function(t){const e=this;e.on("load",()=>e.addSource(t.id,t.source))},addLayer:function(t){const e=this;t.style.source=t.style.source||i.a,e.on("load",()=>e.addLayer(t.style))},addPopups:function(t){const e=this;e.on("load",()=>{const n=t.layer;e.on("click",n,n=>{const o=Object.values(n.lngLat),i=n.features[0],s=Object(r.render)(t.popup,i.properties);(new mapboxgl.Popup).setLngLat(o).setHTML(s).addTo(e)}),e.on("mouseenter",n,()=>e.getCanvas().style.cursor="pointer"),e.on("mouseleave",n,()=>e.getCanvas().style.cursor="")})},addMarker:function(t){const e=this,n=(new mapboxgl.Marker).setLngLat([t.lng,t.lat]);n.getElement().style.cursor="pointer",t.popup&&n.setPopup((new mapboxgl.Popup).setHTML(t.popup)),e.on("load",()=>n.addTo(e))},addCustomControl:function(t){const e=new o[t.controlName](t.options);this.addControl(e,t.pos)},customControls:o}},function(t,e,n){"use strict";(function(t){var r=n(1),o=n(0);t.mapboxer={methods:r.a},e.a=function(e,n,i){let s=null;return{renderValue:function(n){console.log("mapboxgl",mapboxgl.version),console.log(n);const i=n.mapProps.style;"object"==typeof i&&(i.sources=i.sources||{},Object.values(i.sources).forEach(t=>{t.hasOwnProperty("tiles")&!Array.isArray(t.tiles)&&(t.tiles=Array(t.tiles))})),mapboxgl.accessToken=n.accessToken||null,n.mapProps.container=e.id,s=t.mapboxer.map=new mapboxgl.Map(n.mapProps),n.source&&r.a.addSource.call(s,{id:o.a,source:n.source}),n.calls.forEach(({methodName:t,args:e})=>r.a[t].call(s,e))},resize:function(t,e){}}}}).call(this,n(5))},function(t,e,n){t.exports=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var t=Object.prototype.toString,e=Array.isArray||function(e){return"[object Array]"===t.call(e)};function n(t){return"function"==typeof t}function r(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,e){return null!=t&&"object"==typeof t&&e in t}var i=RegExp.prototype.test,s=/\S/;function a(t){return!function(t,e){return i.call(t,e)}(s,t)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,l=/\s+/,p=/\s*=/,h=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function d(t){this.string=t,this.tail=t,this.pos=0}function g(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function v(){this.templateCache={_cache:{},set:function(t,e){this._cache[t]=e},get:function(t){return this._cache[t]},clear:function(){this._cache={}}}}d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},d.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},g.prototype.push=function(t){return new g(t,this)},g.prototype.lookup=function(t){var e,r,i,s=this.cache;if(s.hasOwnProperty(t))e=s[t];else{for(var a,c,u,l=this,p=!1;l;){if(t.indexOf(".")>0)for(a=l.view,c=t.split("."),u=0;null!=a&&u<c.length;)u===c.length-1&&(p=o(a,c[u])||(r=a,i=c[u],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(i))),a=a[c[u++]];else a=l.view[t],p=o(l.view,t);if(p){e=a;break}l=l.parent}s[t]=e}return n(e)&&(e=e.call(this.view)),e},v.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},v.prototype.parse=function(t,n){var o=this.templateCache,i=t+":"+(n||y.tags).join(":"),s=void 0!==o,c=s?o.get(i):void 0;return null==c&&(c=function(t,n){if(!t)return[];var o,i,s,c=!1,g=[],v=[],m=[],w=!1,b=!1,x="",C=0;function k(){if(w&&!b)for(;m.length;)delete v[m.pop()];else m=[];w=!1,b=!1}function _(t){if("string"==typeof t&&(t=t.split(l,2)),!e(t)||2!==t.length)throw new Error("Invalid tags: "+t);o=new RegExp(r(t[0])+"\\s*"),i=new RegExp("\\s*"+r(t[1])),s=new RegExp("\\s*"+r("}"+t[1]))}_(n||y.tags);for(var P,T,j,O,E,S,M=new d(t);!M.eos();){if(P=M.pos,j=M.scanUntil(o))for(var U=0,L=j.length;U<L;++U)a(O=j.charAt(U))?(m.push(v.length),x+=O):(b=!0,c=!0,x+=" "),v.push(["text",O,P,P+1]),P+=1,"\n"===O&&(k(),x="",C=0,c=!1);if(!M.scan(o))break;if(w=!0,T=M.scan(f)||"name",M.scan(u),"="===T?(j=M.scanUntil(p),M.scan(p),M.scanUntil(i)):"{"===T?(j=M.scanUntil(s),M.scan(h),M.scanUntil(i),T="&"):j=M.scanUntil(i),!M.scan(i))throw new Error("Unclosed tag at "+M.pos);if(E=">"==T?[T,j,P,M.pos,x,C,c]:[T,j,P,M.pos],C++,v.push(E),"#"===T||"^"===T)g.push(E);else if("/"===T){if(!(S=g.pop()))throw new Error('Unopened section "'+j+'" at '+P);if(S[1]!==j)throw new Error('Unclosed section "'+S[1]+'" at '+P)}else"name"===T||"{"===T||"&"===T?b=!0:"="===T&&_(j)}if(k(),S=g.pop())throw new Error('Unclosed section "'+S[1]+'" at '+M.pos);return function(t){for(var e,n=[],r=n,o=[],i=0,s=t.length;i<s;++i)switch((e=t[i])[0]){case"#":case"^":r.push(e),o.push(e),r=e[4]=[];break;case"/":o.pop()[5]=e[2],r=o.length>0?o[o.length-1][4]:n;break;default:r.push(e)}return n}(function(t){for(var e,n,r=[],o=0,i=t.length;o<i;++o)(e=t[o])&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(r.push(e),n=e));return r}(v))}(t,n),s&&o.set(i,c)),c},v.prototype.render=function(t,e,n,r){var o=this.parse(t,r),i=e instanceof g?e:new g(e,void 0);return this.renderTokens(o,i,n,t,r)},v.prototype.renderTokens=function(t,e,n,r,o){for(var i,s,a,c="",u=0,l=t.length;u<l;++u)a=void 0,"#"===(s=(i=t[u])[0])?a=this.renderSection(i,e,n,r):"^"===s?a=this.renderInverted(i,e,n,r):">"===s?a=this.renderPartial(i,e,n,o):"&"===s?a=this.unescapedValue(i,e):"name"===s?a=this.escapedValue(i,e):"text"===s&&(a=this.rawValue(i)),void 0!==a&&(c+=a);return c},v.prototype.renderSection=function(t,r,o,i){var s=this,a="",c=r.lookup(t[1]);if(c){if(e(c))for(var u=0,l=c.length;u<l;++u)a+=this.renderTokens(t[4],r.push(c[u]),o,i);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)a+=this.renderTokens(t[4],r.push(c),o,i);else if(n(c)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(r.view,i.slice(t[3],t[5]),(function(t){return s.render(t,r,o)})))&&(a+=c)}else a+=this.renderTokens(t[4],r,o,i);return a}},v.prototype.renderInverted=function(t,n,r,o){var i=n.lookup(t[1]);if(!i||e(i)&&0===i.length)return this.renderTokens(t[4],n,r,o)},v.prototype.indentPartial=function(t,e,n){for(var r=e.replace(/[^ \t]/g,""),o=t.split("\n"),i=0;i<o.length;i++)o[i].length&&(i>0||!n)&&(o[i]=r+o[i]);return o.join("\n")},v.prototype.renderPartial=function(t,e,r,o){if(r){var i=n(r)?r(t[1]):r[t[1]];if(null!=i){var s=t[6],a=t[5],c=t[4],u=i;return 0==a&&c&&(u=this.indentPartial(i,c,s)),this.renderTokens(this.parse(u,o),e,r,u,o)}}},v.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return n},v.prototype.escapedValue=function(t,e){var n=e.lookup(t[1]);if(null!=n)return y.escape(n)},v.prototype.rawValue=function(t){return t[1]};var y={name:"mustache.js",version:"4.0.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(t){m.templateCache=t},get templateCache(){return m.templateCache}},m=new v;return y.clearCache=function(){return m.clearCache()},y.parse=function(t,e){return m.parse(t,e)},y.render=function(t,n,r,o){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(e(i=t)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return m.render(t,n,r,o)},y.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,(function(t){return c[t]}))},y.Scanner=d,y.Context=g,y.Writer=v,y}()},function(t,e,n){"use strict";n.r(e);var r=n(2);HTMLWidgets.widget({name:"mapboxer",type:"output",factory:r.a})},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}]);